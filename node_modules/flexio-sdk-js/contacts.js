var Flexio = require('./src/main.js')

Flexio.setup('xtdkxpcjwzkpgkhkcmhx', { baseUrl: 'https://localhost/api/v1', debug: false, insecure: true })

var command = process.argv[2] || ''

if (command == 'init')
{
    Flexio.pipe()
        .create('/local/tbl_contacts',
                [
                    {"name": "name", "type":"text"},
                    {"name": "phone", "type":"text"}
                ])
        .run()
}
else if (command == 'add')
{
    Flexio.pipe()
        .insert('/local/tbl_contacts', { name: process.argv[3], phone: process.argv[4] })
        .run(function(err, response) {
            console.log(response.text)
        })
}
else if (command == 'list')
{
    Flexio.pipe()
        .read('/local/tbl_contacts')
        .run(function(err, response) {
            console.log(response.text)
        })
}
else
{
    console.log("Unknown/unspecified command");
}


