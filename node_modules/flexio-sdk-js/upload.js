var Flexio = require('./src/main.js')

Flexio.setup('xtdkxpcjwzkpgkhkcmhx', { baseUrl: 'https://localhost/api/v1', debug: true, insecure: true })

var obj = Flexio.task.insert("file", [{name:"abc"},{name:"abc"}])
console.log(JSON.stringify(obj));

console.log(Flexio.task.insert.toCode(obj));

/*
Flexio.pipe()
  .task({"type": "flexio.echo",
         "params": { "msg": "Hello, World"}})
  .run(function(err, response) {
         console.log(response.text)
  })
*/

/*
var pipe = new Flexio.pipe()
pipe.echo("Hello1")
pipe.echo("Hello2")
pipe.echo("Hello3")

var pipe = {
    "name": "Flexio Website",
    "ename": "my-custom-pipe-alias",
    "description": "Flex.io Website",
    "task": [
        {
            "type": "flexio.request",
            "params": {
                "url": "https://www.flex.io"
            }
        }
    ]
}

Flexio.pipes.create(pipe, function (err, response) {
    console.log(err)
    console.log(response)
})*/



/*
var conn = {
    "name": "HTTP Connection",
    "description": "HTTP Connection to API",
    "connection_type": "http",
    "connection_info": {
        "url": "https://api.service.com/endpoint",
        "headers": {
            "Authorization": "Bearer :token",
            "Content-Type": "application/json"
        }
    }
}
*/

/*
var conn = Flexio.connection()
conn.name("Hello")
    .description("This is a test description")

Flexio.connections.create(conn, function (err, response) {
    console.log(err)
    console.log(response)
})
*/


/*
var pipe = Flexio.pipe()
    .javascript(function(context) {
        context.output.write('Hello World! ' + context.query.name)
      })
.run({ query: { name:"Ben"} }, function(err, response) {
    console.log(response.text)
})

Flexio.pipes.run(pipe, { query: { name:"Ben"} }, function(err, response) {
    console.log(response.text)
})

*/

/*
var pipe = Flexio.pipe('hello-world').run(function(err, response) {
    console.log(response.text)
})

var pipe = Flexio.pipes.run('hello-world', function(err, response) {
    console.log(response.text)
})
*/
